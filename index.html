<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Generar Semáforo</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
</head>
<body style="font-family:sans-serif; text-align:center; margin-top:50px;">
  <h2>Generador de links para clases</h2>
  <input id="classInput" type="text" placeholder="Nombre de la clase (ej: quimica1)" style="padding:10px; font-size:1.2em;">
  <button onclick="generate()" style="padding:10px 20px; margin-left:10px;">Generar</button>
  
  <div id="links" style="margin-top:30px;"></div>
  <canvas id="qrcode" style="margin-top:20px;"></canvas>

  <script>
    function generate() {
      const classId = document.getElementById("classInput").value.trim();
      if (!classId) { alert("Escribí un nombre de clase"); return; }

      const base = window.location.origin;
      const voteUrl = `${base}/vote.html?class=${classId}`;
      const screenUrl = `${base}/screen.html?class=${classId}`;
      const popupUrl = `${base}/popup.html?class=${classId}`;

      document.getElementById("links").innerHTML = `
        <p><b>URL para alumnos:</b> <a href="${voteUrl}" target="_blank">${voteUrl}</a></p>
        <p><b>URL para pantalla:</b> <a href="${screenUrl}" target="_blank">${screenUrl}</a></p>
        <p><b>URL para popup:</b> 
            <a href="#" onclick="window.open('${popupUrl}','Semaforo','width=30,height=30,menubar=no,toolbar=no,location=no,status=no,scrollbars=no,resizable=yes'); return false;">
              ${popupUrl}
            </a>
        </p>
      `;

      QRCode.toCanvas(document.getElementById("qrcode"), voteUrl, { width: 200 });
    }
  </script>
</body>
</html>
